THE CP/M VERSION OF THE CORVUS DISC
DIAGNOSTIC ( CDIAGNOS.COM ) PROVIDES
A SOME RELATIVELY "SAFE" DISC TESTS
ALONG WITH THE ABILITY TO LIST AND/OR
CHANGE SOME PARAMETERS WITHIN THE
CONTROLLER CODE.  THE FUNCTIONS 
AVAILABLE IN THIS VERSION ARE:

 1.  DISC FORMAT CHECK
     THE CONTROLLER TRYS TO READ EACH
     512 BYTE SECTOR TO VERIFY THAT IT
     IS "GOOD" (HAS A CORRECT CRC).  IF
     IT GETS A BAD CRC AFTER TWENTY READ
     ATTEMPTS, IT WILL RE-WRITE THE 
     SECTOR TO RESET THE CRC.  THIS 
     USUALLY TAKES  1-2  MINUTES.  NOTE:
     ON  REV A  CONTROLLERS, THIS FUNCTION
     IS NOT AVAILABLE WITH   VERSION 0
     CONTROLLER CODE.

 2.  READ THE CONTROLLER CODE VERSION #
     THIS OPTION WILL RETURN SOME 
     INFORMATION ABOUT THE CONTROLLER
     CODE ON YOUR DRIVE.  REV B  DRIVES
     CAN RETURN MORE DETAILED INFORMATION
     THAN  REV A  DRIVES.

 3.  HEAD SERVO TEST
     THIS TEST ALTERNATELY READS  128  BYTE
     SECTORS AT  DISC ADDRESS  0  AND
     1000 SECTORS IN FROM THE MAXIMUM.  THIS
     TEST IS MAINLY USEFUL TO VERIFY THAT
     THE DRIVE WILL ACTUALLY READ DATA AND
     MOVE ITS HEAD.

 4.  MANUAL CONTROLLER DIAGNOSTIC
     THIS OPTION ALLOWS ONE TO READ OR WRITE
     DIRECTLY TO THE CORVUS CONTROLLER I/O
     PORTS AS WELL AS READ THE STATUS LINES.
     IT IS MAINLY USEFUL FOR CORVUS SERVICE
     PERSONEL WHEN ATTEMPTING TO DIAGNOS
     A DRIVE PROBLEM OVER THE PHONE.
     -------------- WARNING ---------------
     THIS TEST CAN CAUSE THE USER DATA ON
     THE DISC TO BE OVERWRITTEN.  IF USED ON
     A  REV A  DRIVE WITH THE FORMAT JUMPER
     IN PLACE, IT CAN EVEN CAUSE THE DISC TO
     BE REFORMATED.
     --------------------------------------

 5.  UPDATE CONTROLLER CODE
     THIS OPTION ALLOWS ONE TO UPDATE OR
     INITIALLY INSTALL CONTROLLER CODE ON THE
     CORVUS DRIVE.  THIS CODE RESIDES ON
     PROTECTED TRACKS OF THE HARD DISC. 
     NORMALLY THIS CODE CANNOT BE WRITTEN TO
     OR READ BY THE USER (EVEN ACCIDENTALLY).
     HOWEVER, IT CAN BE MADE ACCESSABLE (TO
     WRITING) BY TURNING ON THE FORMAT SWITCH
     (OR BY ADDING A JUMPER TO THE DRIVE
     BACKPLANE).  THIS OPTION REPLACES THE
     SEPARATE PROGRAM: CCODE.COM  THAT HAD
     SIMILAR CAPABILITIES.
     -------------- WARNING ----------------
     ON  REV A  DRIVES, DO NOT ATTEMPT TO
     WRITE THE CODE OUT TO THE DRIVE WITHOUT
     TURNING ON THE FORMAT SWITCH (OR INSTALLING
     THE FORMAT JUMPER).  IF YOU DO, IT WILL BE
     WRITTEN OUT TO THE USER AREA OF THE DISC
     - OVERLAYING POSSIBLY VALUABLE USER PROGRAMS
     OR DATA!!
     ---------------------------------------
     TO USE THIS OPTION:
     A.  POWER THE DRIVE DOWN.  IF YOUR DRIVE
         HAS A  FORMAT SWITCH (UNDER THE FRONT
         BEZEL OR ON THE BACK OF THE DRIVE),
         TURN IT ON AND PROCEED TO STEP D.
     B.  ON DRIVES WITHOUT A FORMAT SWITCH,
         REMOVE THE PLASTIC COVER OVER THE
         BACKPLANE PINS (ON THE BACK OF THE
         DRIVE WHERE THE COMPUTER CABLE IS
         ATTACHED.
     C.  CONNECT A JUMPER BETWEEN PINS:

	   D37 & D38  (FOR REV A DRIVES)
	   C2  & C12  (FOR REV B DRIVES)

  	 AS ILLUSTRATED BELOW:

	    !* * * * * * * * * * * * * * * *
	 C  !2      10        20        30
	    !X * * * * X * * * * * * * * * *
	     XXXXXXXXXXX  <--- C2-C12 JUMPERED

	    !* * * * * ~ ~ ~ ~ * * * * X * *
	 D  !2      10        30       X40
	    !* * * * * ~ ~ ~ ~ * * * * X * *
				       ^
				       ^
				D37-D38 JUMPERED

     D.  POWER THE DRIVE BACK UP.
     E.  RUN THIS PROGRAM FROM YOUR FLOPPY BASED
	 CP/M AND SELECT THE UPDATE OPTION.
     F.  AFTER THE CODE IS WRITTEN OUT, TURN
	 OFF THE FORMAT SWITCH (OR REMOVE THE
	 JUMPER) AND RESET THE DRIVE BY EITHER
	 USING THE RESET SWITCH OR BY POWERING 
	 THE DRIVE DOWN AND UP AGAIN.

 6.  LIST/MODIFY DRIVE PARAMETERS
     THIS OPTION ALLOW YOU TO EXAMINE
     AND/OR CHANGE THE:

     A.  THE DRIVE SPARE TRACK TABLE
	 THIS TABLE SPECIFIES PHYSICAL
	 TRACK NUMBERS WHICH ARE TO BE
	 SKIPPED OVER WHEN THE CONTROLLER
	 ACCESSES DATA ON THE DRIVE.
	 THIS ALLOWS ONE TO HIDE THE 
	 EXISTANCE OF MEDIA DEFECTS
	 FROM THE EXTERNAL USER (THE
	 DATA SURFACE WILL LOOK PERFECT
	 TO HIM).
     B.  THE SECTOR INTERLEAVING SPEC
	 THE DEFAULTS USED HERE HAVE BEEN
	 OPTIMIZED FOR SMALL COMPUTERS
	 LIKE  APPLE-II'S.  TYPICALLY,WE
	 HAVE SELECTED A VALUE OF:

	      9 - FOR 10MB AND 20 MB DRIVES
	     12 - FOR 5MB DRIVES

     C.  THE VIRTUAL DRIVE OFFSET TABLE
	 THIS TABLE ALLOW ONE DRIVE TO BEHAVE
	 AS IF IT WERE SEVERAL SMALLER DRIVES
	 DAISEY-CHAINED TOGATHER.  THE TABLE
	 ENTRYS SPECIFY THE TRACK NUMBER AT
	 WHICH THESE VIRTUAL DRIVES START.

     NORMALLY, ONE WOULD NOT HAVE OCCASION
     TO DISTURB THESE PARAMETERS UNLESS
     THE DRIVE HAS BEEN RE-FORMATTED OR A
     BAD TRACK DEVELOPES.
 7.  LIST/MODIFY CONSTELLATION PARAMETERS
     THIS OPTION ALLOW ONE TO EXAMINE AND
     /OR MODIFY THE:

      A.  MASTER MULTIPLEXER CONNECTION TABLE

	  (I.E.- SPECIFY WHAT IS CONNECTED TO IT)
	  THIS TABLE IS USUALLY SET TO ASSUME
 	  ALL THE SLOTS HAVE A MUX ON THEM.
      B.  CONSTELLATION POLLING CONSTANTS

	  THESE NUMBERS DETERMINE CERTAIN
	  ASPECTS OF THE CONSTELLATION
	  POLLING ENVIRONMENT.

